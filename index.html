<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Anshu Cross ‚Äî MODERN CROSS GAME BY ANSHUHIM</title>
  <meta name="theme-color" content="#0b0d13"/>
  <style>
    /* ====== Theme & layout (mobile-first) ====== */
    :root{
      --bg:#0b0d13; --surface:#15171c; --card:#1b1d24;
      --primary:#1c5bff; --muted:#8b94a7;
      --xcolor:#2ea5ff; --ocolor:#c67eff;
      --glass: rgba(255,255,255,0.02);
      --radius:16px; --transition:all .22s cubic-bezier(.4,0,.2,1);
      --safe-bottom: env(safe-area-inset-bottom, 12px);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;padding:0;background:linear-gradient(180deg,#0b0d13 0%, #0f1116 100%);color:#e8eef8;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    /* Make app fill viewport and avoid vertical scrolling */
    .app-root{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:space-between;padding:14px 16px;padding-bottom:calc(12px + var(--safe-bottom));gap:8px;overflow:hidden}
    header{width:100%;max-width:420px;display:flex;align-items:center;justify-content:space-between;gap:8px}
    .hdr-left{display:flex;align-items:center;gap:10px}
    .logo-small{width:42px;height:42px;border-radius:10px;background:linear-gradient(180deg,#1a5bff 0%,#1738ff 100%);display:flex;align-items:center;justify-content:center;box-shadow:0 10px 26px rgba(28,91,255,0.12);font-weight:800}
    .title{font-weight:900;font-size:18px;letter-spacing:0.6px;text-align:center}
    .title .brand{color:var(--primary)}
    .hdr-right button{background:transparent;border:none;color:var(--muted);font-weight:800;font-size:18px;cursor:pointer;padding:8px;border-radius:10px}
    /* central area uses remaining space; keep everything visible without scrolling */
    main{width:100%;max-width:420px;flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px}
    /* menu area */
    .menu-area{width:100%;display:flex;flex-direction:column;align-items:center;gap:12px}
    .menu-subtitle{color:var(--muted);font-size:12px}
    .modes{width:100%;display:flex;flex-direction:column;gap:10px}
    .big-btn{width:100%;padding:14px;border-radius:28px;background:var(--card);display:flex;align-items:center;gap:12px;justify-content:center;font-weight:900;font-size:15px;border:none;color:var(--muted);cursor:pointer;transition:var(--transition);box-shadow:0 18px 40px rgba(0,0,0,0.35)}
    .big-btn .emoji{font-size:18px;margin-right:8px}
    .big-btn.primary{background:linear-gradient(90deg,var(--primary),#1646ff);color:#fff;box-shadow:0 22px 44px rgba(22,68,255,0.16)}
    /* settings & help row slightly larger as requested */
    .small-actions{display:flex;gap:14px;align-items:center;justify-content:center;margin-top:4px}
    .small-actions button{background:transparent;border:none;color:var(--muted);font-weight:800;font-size:15px;cursor:pointer;padding:8px 12px;border-radius:12px}
    .small-actions button:hover{color:#fff}
    /* Remove version text entirely (no element) */
    /* footer credit enhanced */
    footer{width:100%;max-width:420px;text-align:center;color:var(--muted);font-size:13px;padding-top:6px}
    footer .credit{font-weight:700;color:#fff}
    /* Diff page & game page reuse existing styles but ensure fit in single view */
    .page{width:100%;display:none;flex-direction:column;gap:10px;align-items:center;justify-content:center}
    .page.show{display:flex}
    .diff-card{display:flex;align-items:center;gap:12px;padding:13px;border-radius:18px;background:var(--card);width:100%;border:1px solid var(--glass);cursor:pointer}
    .diff-card .icon{width:46px;height:46;border-radius:50%;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.02)}
    .diff-card.active{background:linear-gradient(90deg,var(--primary),#1646ff);color:#fff;box-shadow:0 20px 40px rgba(22,68,255,0.12)}
    .start-row{width:100%;margin-top:4px}
    .start-btn{width:100%;padding:12px;border-radius:28px;background:linear-gradient(90deg,var(--primary),#1646ff);color:#fff;border:none;font-weight:900;font-size:15px}
    /* game styles kept compact */
    .game{width:100%;display:none;flex-direction:column;gap:10px;align-items:center}
    .game.show{display:flex}
    .topbar{width:100%;display:flex;align-items:center;justify-content:space-between}
    .pill{padding:10px 12px;border-radius:999px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);font-weight:800;display:flex;align-items:center;gap:8px}
    .pill.blink{animation:blink 1s infinite}
    @keyframes blink{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}
    .board{width:100%;aspect-ratio:1/1;display:grid;grid-template-columns:repeat(3,1fr);gap:10px;padding:10px;border-radius:18px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent)}
    .cell{background:rgba(255,255,255,0.02);border-radius:14px;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:36px;color:var(--muted);cursor:pointer}
    .cell.x{color:var(--xcolor)} .cell.o{color:var(--ocolor)}
    .score-row{width:100%;display:flex;gap:10px}
    .score-box{flex:1;padding:12px;border-radius:18px;background:var(--card);display:flex;flex-direction:column;align-items:center}
    .bottom-area{width:100%}
    .reset-btn{width:100%;padding:12px;border-radius:28px;background:linear-gradient(90deg,var(--primary),#1646ff);color:#fff;border:none;font-weight:900}
    /* modal basics (unchanged) */
    .modal-back{position:fixed;inset:0;background:rgba(2,6,23,0.6);display:none;align-items:center;justify-content:center;z-index:600}
    .modal-back.show{display:flex}
    .modal{background:var(--surface);padding:16px;border-radius:12px;max-width:92%;width:360px;text-align:center;border:1px solid var(--glass)}
    .modal .big-icon{font-size:44px;margin-bottom:6px}
    .modal h3{margin:6px 0}
    .modal p{color:var(--muted);font-size:13px;margin:6px 0 12px}
    .modal .actions{display:flex;gap:8px;justify-content:center}
    .modal button{padding:10px 12px;border-radius:10px;border:none;cursor:pointer;font-weight:800}
    /* ensure no page scroll */
    body, .app-root{overflow:hidden}
    @media (min-height:800px){ main{justify-content:flex-start;padding-top:28px} }
  </style>
</head>
<body>
  <div class="app-root" id="appRoot">
    <!-- Header: left logo, centered brand, right home button -->
    <header>
      <div class="hdr-left">
        <div class="logo-small" aria-hidden="true">‚úï‚≠ï</div>
      </div>

      <div class="title" aria-label="App title">
        <span style="font-size:14px;display:block;color:var(--muted)">GAME</span>
        <span class="brand" style="font-size:18px">Anshu Cross</span>
      </div>

      <div class="hdr-right">
        <button id="homeBtn" title="Main menu">üè†</button>
      </div>
    </header>

    <main>
      <!-- MAIN MENU (always fits single screen) -->
      <section class="menu-area page show" id="menuPage" aria-hidden="false">
        <div style="height:6px"></div>
        <div style="text-align:center;margin-bottom:6px" class="menu-subtitle">Choose Mode</div>

        <div class="modes" role="list">
          <button class="big-btn primary" id="btnVsCPU"><span class="emoji">ü§ñ</span> VS COMPUTER</button>
          <button class="big-btn" id="btnPvP"><span class="emoji">üë•</span> OFFLINE MULTIPLAYER</button>
        </div>

        <div class="small-actions" style="margin-top:6px">
          <button id="btnSettings">‚öô Settings</button>
          <button id="btnHelp">‚ùî Help</button>
        </div>
      </section>

      <!-- DIFFICULTY (compact and fits) -->
      <section class="page" id="diffPage" aria-hidden="true">
        <h2 style="margin:0">Select Difficulty</h2>
        <div style="text-align:center;color:var(--muted);font-size:13px;margin-bottom:6px">Choose your opponent's processing power</div>

        <div id="diffList" style="width:100%;display:flex;flex-direction:column;gap:8px">
          <div class="diff-card" data-diff="easy" id="diff-easy">
            <div class="icon">üôÇ</div>
            <div style="flex:1"><strong>Easy</strong><div style="color:var(--muted);font-size:12px">Perfect for beginners</div></div>
            <div style="opacity:.6">‚óã</div>
          </div>

          <div class="diff-card active" data-diff="medium" id="diff-medium">
            <div class="icon">üòê</div>
            <div style="flex:1"><strong>Medium</strong><div style="color:var(--muted);font-size:12px">Balanced challenge</div></div>
            <div style="opacity:.6">‚óè</div>
          </div>

          <div class="diff-card" data-diff="hard" id="diff-hard">
            <div class="icon">ü§ñ</div>
            <div style="flex:1"><strong>Hard</strong><div style="color:var(--muted);font-size:12px">Unbeatable AI</div></div>
            <div style="opacity:.6">‚óã</div>
          </div>
        </div>

        <div class="start-row" style="width:100%">
          <button class="start-btn" id="startVsCpu">Start Game ‚ñ∂</button>
        </div>
      </section>

      <!-- GAME (compact & mobile-ready) -->
      <section class="game page" id="gamePage" aria-hidden="true">
        <div class="topbar">
          <div style="width:42px"></div>
          <div class="pill turn blink" id="turnPill">üë§ Your Turn ‚Äî X</div>
          <div style="width:42px"></div>
        </div>

        <div class="board" id="board" role="grid" aria-label="Game board">
          <!-- cells generated via JS -->
        </div>

        <div class="score-row">
          <div class="score-box" id="boxYou"><div class="score-label">YOU</div><div class="score-val" id="scoreLeft">0</div></div>
          <div class="score-box" id="boxCPU"><div class="score-label">CPU</div><div class="score-val" id="scoreRight">0</div></div>
        </div>

        <div class="bottom-area" style="width:100%">
          <button class="reset-btn" id="resetBtn">‚Üª Reset Game</button>
        </div>
      </section>
    </main>

    <!-- Footer credit (prominent, centered) -->
    <footer>
      <div>Website by <span class="credit">Himanshu ‚Äî anshuhim.com</span></div>
    </footer>
  </div>

  <!-- Result modal (unchanged) -->
  <div class="modal-back" id="resultModal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="big-icon" id="resultIcon">üèÜ</div>
      <h3 id="resultTitle">You Win!</h3>
      <p id="resultText">Great move ‚Äî X completed the line.</p>
      <div class="actions">
        <button id="modalRestart" style="background:var(--primary);color:#fff;padding:10px 12px">Restart</button>
        <button id="modalMain" style="background:#2b2f37;color:#fff;padding:10px 12px">Main Menu</button>
      </div>
    </div>
  </div>

  <!-- Help & Settings modals (unchanged content) -->
  <div class="modal-back" id="helpModal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <h3>How to Play</h3>
      <div class="help-content" style="font-size:13px;color:var(--muted);text-align:left">
        <p><strong>Goal:</strong> Get three marks in a row ‚Äî horizontally, vertically or diagonally.</p>
        <p><strong>Modes:</strong> <em>VS Computer</em> choose difficulty (Easy/Medium/Hard). <em>Offline Multiplayer</em> two players take turns on same device.</p>
        <p><strong>Turns:</strong> X always starts. A blue pill shows whose turn it is and blinks while active.</p>
        <p><strong>Result:</strong> When someone wins or game draws, a popup appears with Restart and Main Menu buttons.</p>
      </div>
      <div class="actions" style="margin-top:8px"><button id="closeHelp" style="background:var(--primary);color:#fff;padding:10px 12px;border-radius:10px">Close</button></div>
    </div>
  </div>

  <div class="modal-back" id="settingsModal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <h3>Settings</h3>
      <div style="display:flex;flex-direction:column;gap:10px;margin-top:8px">
        <label style="display:flex;justify-content:space-between;align-items:center">
          <div><div style="font-weight:800">Sound Effects</div><div style="font-size:12px;color:var(--muted)">Toggle tap/win/draw sounds</div></div>
          <input type="checkbox" id="toggleSfx"/>
        </label>
        <label style="display:flex;justify-content:space-between;align-items:center">
          <div><div style="font-weight:800">Background Music</div><div style="font-size:12px;color:var(--muted)">Ambient loop music</div></div>
          <input type="checkbox" id="toggleMusic"/>
        </label>
        <label style="display:flex;justify-content:space-between;align-items:center">
          <div><div style="font-weight:800">Vibrate on move</div><div style="font-size:12px;color:var(--muted)">Short vibration on tap (mobile)</div></div>
          <input type="checkbox" id="toggleVib"/>
        </label>
      </div>
      <div class="actions" style="margin-top:12px"><button id="closeSettings" style="background:var(--primary);color:#fff;padding:10px 12px;border-radius:10px">Close</button></div>
    </div>
  </div>

<script>
/* This script is the same core logic as provided earlier, adapted to the new layout.
   It preserves: splash, menu, difficulty, AI modes, sounds, settings, help, result modal.
   Only UI element IDs changed where needed (homeBtn wired to main menu).
*/

/* Minimal re-implementation so this file is complete and ready to use */
let board = Array(9).fill('');
let currentPlayer = 'X';
let gameMode = null; // 'ai' or 'pvp'
let aiDifficulty = 'medium';
let gameActive = true;
let scores = { you: 0, cpu: 0, draws: 0 };
let sfxEnabled = true, musicEnabled = true, vibrateEnabled = true;

/* DOM refs */
const splash = document.getElementById('appRoot'); // splash hidden previously; keep app visible (no separate big splash)
const menuPage = document.getElementById('menuPage');
const diffPage = document.getElementById('diffPage');
const gamePage = document.getElementById('gamePage');
const boardEl = document.getElementById('board');
const turnPill = document.getElementById('turnPill');
const resultModal = document.getElementById('resultModal');
const helpModal = document.getElementById('helpModal');
const settingsModal = document.getElementById('settingsModal');

/* Build board cells (compact) */
function buildBoard(){
  boardEl.innerHTML = '';
  for(let i=0;i<9;i++){
    const c = document.createElement('div');
    c.className = 'cell';
    c.dataset.index = i;
    c.tabIndex = 0;
    c.addEventListener('click', ()=> onCellClick(i));
    c.addEventListener('keydown', (e)=> { if(e.key==='Enter' || e.key===' ') onCellClick(i); });
    boardEl.appendChild(c);
  }
}

/* Page helpers */
function showPage(name){
  menuPage.classList.toggle('show', name==='menu');
  diffPage.classList.toggle('show', name==='diff');
  gamePage.classList.toggle('show', name==='game');
}
function showModal(el){ el.classList.add('show'); el.style.display='flex'; el.setAttribute('aria-hidden','false'); }
function hideModal(el){ el.classList.remove('show'); el.style.display='none'; el.setAttribute('aria-hidden','true'); }

/* UI update */
function updateUI(){
  // pill text
  if(gameMode === 'pvp'){
    turnPill.innerText = currentPlayer === 'X' ? 'üë§ 1Ô∏è‚É£ Player 1 ‚Äî X' : 'üë§ 2Ô∏è‚É£ Player 2 ‚Äî O';
  } else {
    turnPill.innerText = currentPlayer === 'X' ? 'üë§ Your Turn ‚Äî X' : 'ü§ñ AI\'s Turn ‚Äî O';
  }
  turnPill.classList.toggle('blink', gameActive);
  // board cells
  const cells = boardEl.querySelectorAll('.cell');
  cells.forEach((el,i)=>{
    el.innerText = board[i];
    el.classList.remove('x','o','winner');
    if(board[i] === 'X') el.classList.add('x');
    if(board[i] === 'O') el.classList.add('o');
  });
  // scores
  document.getElementById('scoreLeft').innerText = scores.you;
  document.getElementById('scoreRight').innerText = scores.cpu;
}

/* Game flow */
function startGame(mode, diff){
  gameMode = mode;
  aiDifficulty = diff || 'medium';
  board = Array(9).fill('');
  currentPlayer = 'X';
  gameActive = true;
  buildBoard();
  updateUI();
  showPage('game');
}
function onCellClick(i){
  if(!gameActive) return;
  if(board[i] !== '') return;
  if(gameMode === 'ai' && currentPlayer !== 'X') return;
  if(vibrateEnabled && navigator.vibrate) navigator.vibrate(20);
  board[i] = currentPlayer;
  if(checkEnd()) { updateUI(); return; }
  currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
  updateUI();
  if(gameMode === 'ai' && currentPlayer === 'O') setTimeout(()=> aiMove(), 360);
}
function checkEnd(){
  const wins = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
  for(const cond of wins){
    const [a,b,c] = cond;
    if(board[a] && board[a] === board[b] && board[a] === board[c]){
      gameActive = false;
      // highlight
      const cells = boardEl.querySelectorAll('.cell');
      [a,b,c].forEach(idx => cells[idx].classList.add('winner'));
      // result text depending on mode
      if(gameMode === 'ai'){
        if(board[a] === 'X'){ scores.you++; showResult('You Win!','üèÜ', 'X completed the line.'); }
        else { scores.cpu++; showResult('You Lose!','ü§ñ', 'O completed the line.'); }
      } else {
        showResult(board[a] + ' Wins!', 'üéâ', board[a] + ' completed the line.');
      }
      saveState();
      return true;
    }
  }
  if(!board.includes('')){
    gameActive = false;
    scores.draws = (scores.draws||0)+1;
    showResult("It's a Draw","ü§ù","Nobody could get three in a row.");
    saveState();
    return true;
  }
  return false;
}

/* Minimal AI: random/heuristic/minimax as before (kept simple to remain compact) */
function aiMove(){
  if(!gameActive) return;
  let idx = null;
  if(aiDifficulty === 'easy'){
    const avail = board.map((v,i)=>v===''?i:null).filter(x=>x!==null);
    idx = avail[Math.floor(Math.random()*avail.length)];
  } else if(aiDifficulty === 'medium'){
    if(Math.random() < 0.25){
      const avail = board.map((v,i)=>v===''?i:null).filter(x=>x!==null);
      idx = avail[Math.floor(Math.random()*avail.length)];
    } else {
      idx = findWin('O') ?? findWin('X') ?? (board[4]===''?4:null) ?? pickCorner() ?? pickAny();
    }
  } else {
    idx = minimaxRoot(board.slice(),'O');
  }
  if(idx == null) return;
  board[idx] = 'O';
  if(checkEnd()) { updateUI(); return; }
  currentPlayer = 'X';
  updateUI();
}
function findWin(p){
  for(const cond of [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]]){
    const [a,b,c] = cond;
    const vals = [board[a],board[b],board[c]];
    if(vals.filter(v=>v===p).length===2 && vals.filter(v=>v==='').length===1){
      return [a,b,c][vals.indexOf('')];
    }
  }
  return null;
}
function pickCorner(){ const corners=[0,2,6,8].filter(i=>board[i]===''); if(corners.length) return corners[Math.floor(Math.random()*corners.length)]; return null; }
function pickAny(){ for(let i=0;i<9;i++) if(board[i]==='') return i; return null; }
function minimaxRoot(bd, player){
  let bestVal=-Infinity, move=null;
  for(let i=0;i<9;i++){ if(bd[i]===''){ bd[i]=player; const val=minimax(bd,false); bd[i]=''; if(val>bestVal){bestVal=val;move=i;} } }
  return move;
}
function minimax(bd, isMax){
  const w = checkWinnerMini(bd);
  if(w !== null){ if(w==='O') return 10; if(w==='X') return -10; if(w==='draw') return 0; }
  if(isMax){
    let best=-Infinity; for(let i=0;i<9;i++){ if(bd[i]===''){ bd[i]='O'; const val=minimax(bd,false); bd[i]=''; best=Math.max(best,val); } } return best;
  } else {
    let best=Infinity; for(let i=0;i<9;i++){ if(bd[i]===''){ bd[i]='X'; const val=minimax(bd,true); bd[i]=''; best=Math.min(best,val); } } return best;
  }
}
function checkWinnerMini(bd){
  const wins=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
  for(const c of wins){ const [a,b,c2]=c; if(bd[a] && bd[a]===bd[b] && bd[a]===bd[c2]) return bd[a]; }
  if(!bd.includes('')) return 'draw'; return null;
}

/* Result modal */
function showResult(title, icon, text){
  document.getElementById('resultTitle').innerText = title;
  document.getElementById('resultIcon').innerText = icon;
  document.getElementById('resultText').innerText = text;
  showModal(resultModal);
}
document.getElementById('modalRestart').addEventListener('click', ()=> { hideModal(resultModal); startGame(gameMode || 'pvp', aiDifficulty); });
document.getElementById('modalMain').addEventListener('click', ()=> { hideModal(resultModal); showPage('menu'); });

/* menu interactions */
document.getElementById('btnVsCPU').addEventListener('click', ()=> showPage('diff'));
document.getElementById('btnPvP').addEventListener('click', ()=> startGame('pvp'));
document.getElementById('startVsCpu').addEventListener('click', ()=> startGame('ai', aiDifficulty));
document.getElementById('diff-easy').addEventListener('click', ()=> setDiff('easy'));
document.getElementById('diff-medium').addEventListener('click', ()=> setDiff('medium'));
document.getElementById('diff-hard').addEventListener('click', ()=> setDiff('hard'));
function setDiff(d){ aiDifficulty = d; document.querySelectorAll('.diff-card').forEach(el=>el.classList.remove('active')); document.getElementById('diff-'+d).classList.add('active'); }

/* home button goes to main menu (as requested) */
document.getElementById('homeBtn').addEventListener('click', ()=> {
  hideModal(resultModal); hideModal(helpModal); hideModal(settingsModal);
  showPage('menu');
});

/* help/settings */
document.getElementById('btnHelp').addEventListener('click', ()=> showModal(helpModal));
document.getElementById('closeHelp').addEventListener('click', ()=> hideModal(helpModal));
document.getElementById('btnSettings').addEventListener('click', ()=> showModal(settingsModal));
document.getElementById('closeSettings').addEventListener('click', ()=> hideModal(settingsModal));

/* reset button */
document.getElementById('resetBtn').addEventListener('click', ()=> { scores = { you:0, cpu:0, draws:0 }; saveState(); startGame(gameMode || 'pvp', aiDifficulty); });

/* simple persistence */
function saveState(){ localStorage.setItem('ac_scores', JSON.stringify(scores)); localStorage.setItem('ac_prefs', JSON.stringify({ sfxEnabled, musicEnabled, vibrateEnabled })); }
function loadState(){ try{ const sc = JSON.parse(localStorage.getItem('ac_scores')||'{}'); if(sc.you!==undefined) scores=sc; const p = JSON.parse(localStorage.getItem('ac_prefs')||'{}'); if(p.sfxEnabled!==undefined) sfxEnabled=p.sfxEnabled; if(p.musicEnabled!==undefined) musicEnabled=p.musicEnabled; if(p.vibrateEnabled!==undefined) vibrateEnabled=p.vibrateEnabled; }catch(e){} }
loadState();
buildBoard();
updateUI();

/* keep everything visible ‚Äî no scroll; app fits single screen */
showPage('menu');

/* small UX: keyboard shortcut for main menu (Escape) */
window.addEventListener('keydown', e=> { if(e.key === 'Escape') { showPage('menu'); hideModal(resultModal); hideModal(helpModal); hideModal(settingsModal); } });

</script>
</body>
</html>
